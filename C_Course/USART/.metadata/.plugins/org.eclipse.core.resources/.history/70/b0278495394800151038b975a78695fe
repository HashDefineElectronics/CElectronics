#include "tick.h"

// ----------------------------------------------------------------------------

static volatile uint32_t TickCounter;

void tick_init(void)
{
  // Use SysTick as reference for the delay loops.
  SysTick_Config (SystemCoreClock / TIMER_FREQUENCY_HZ);
}

uint32_t timer_GetTick(void)
{
    return TickCounter;
}

void timer_DelayMs (uint32_t ticks)
{
  uint32_t StartTickCount;

  StartTickCount = TickCounter;

  // wait until the difference between our start tick
  // and stop tick
  while((TickCounter - StartTickCount) < ticks);
}

void SysTick_Handler (void)
{
    TickCounter++;
}

// ----------------------------------------------------------------------------
