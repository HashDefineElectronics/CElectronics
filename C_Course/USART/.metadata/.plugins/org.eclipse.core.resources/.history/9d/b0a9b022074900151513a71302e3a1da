/////////////////////////////////////////////////////////////////////////
///	\file main.c
///	\brief This is the main program code.
///
///	Author: Ronald Sousa (Opticalworm)
/////////////////////////////////////////////////////////////////////////
#include "common.h"
#include "MCU/led.h"
#include "MCU/usart2.h"
#include "MCU/tick.h"

/////////////////////////////////////////////////////////////////////////
///	\brief the first user code function to be called after the ARM M0
///	has initial.
/////////////////////////////////////////////////////////////////////////
void main(void)
{
    uint8_t StringTemp[25];
    uint8_t RecevieByte;

    Led_Init();
    Tick_init();
    Usart2_Init(9600);

    Usart2_WriteString((uint8_t *)"Hello World!\r\n");


    for ( ;; )
    {

        if(!Usart2_ReadByte(&RecevieByte)){
            Led_Toggle();
            Usart2_WriteByte(RecevieByte);
        }


        //Tick_DelayMs(1000); // delay 1s;

        snprintf(&StringTemp[0], 25, "Tick %d\r\n", Tick_GetMs());

        Usart2_WriteString(&StringTemp[0]);
    }
}
